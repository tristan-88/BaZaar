from faker import Faker
from app.models import (db, Photo)
import random
import requests
import json

faker = Faker()
listIds = [795579926, 985221289, 792296525, 982818321, 715743099, 773673958, 1001279627, 600841808, 861297079, 946048688, 903214765, 761915084, 1010192977, 1010198605, 931457889, 910074725, 823068364, 795579926, 996231348, 971135186, 635575207, 591968980, 723891179, 996231338, 475421477, 963124294, 689064814, 985313290, 1010197853, 723092297, 996231314, 579829200, 990598277, 969917647, 1010198523, 934948339, 968873316, 844302712, 923361656, 759735726, 942264382, 952914802, 950677831, 996224108, 996229500, 827034981, 996231280, 164947679, 691902978, 996231282, 519357840, 682418119, 996231278, 973472802, 201696628, 936640775, 971713235, 950267511, 185443766, 980881837, 925099724, 996231266, 996231258, 967759659, 832120364, 684579199, 996231240, 600278661, 919628636, 971510869, 845077133, 846284821, 911451059, 737099950, 567589688, 706789131, 996231216, 983106146, 762253703, 867755882, 996229680, 594385971, 874646882, 996231206, 996229668, 996231204, 976373962, 977104401, 916079889, 974351148, 923873430, 1010198401, 883639181, 1010197303, 628119985, 763723629, 996231180, 959416786, 609265387, 914365696, 1001903803, 691902978]

def seed_photos():
    i = 1
    while i < len(listIds) -1:
        response = requests.get(f'https://openapi.etsy.com/v2/listings/{listIds[i]}/images/?api_key=9i7i1vu4xhs80233snqp1t4y').json()
        photosObj = response['results']
        for photo in photosObj:
            demo = Photo(
                product_id=i, 
                photo_url=photo["url_fullxfull"]
            )
            db.session.add(demo)
        i += 1
    db.session.commit()


def undo_photos():
    db.session.execute('''TRUNCATE photos RESTART IDENTITY CASCADE;''')
    db.session.commit()
